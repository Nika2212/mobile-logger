/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
var StaticDataContainer = /** @class */ (function () {
    function StaticDataContainer() {
    }
    StaticDataContainer.getSquircleSVG = function () {
        return "\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"58\" height=\"58\" viewBox=\"-304 -304 608 608\">\n                <title>Squircle: x to 4th plus y to 4th equals radius to 4th</title>\n                <path fill=\"#01a0e4\" stroke=\"#01a0e4\" stroke-width=\"4.04\" d=\"M0,288 C126.2,288,196.3563,288,242.1782,242.1782 C288,196.3563,288,126.2,288,0 C288,-126.2,288,-196.3563,242.1782,-242.1782 C196.3563,-288,126.2,-288,0,-288 C-126.2,-288,-196.3563,-288,-242.1782,-242.1782 C-288,-196.3563,-288,-126.2,-288,0 C-288,126.2,-288,196.3563,-242.1782,242.1782 C-196.3563,288,-126.2,288,0,288Z\"/>\n            </svg>\n        ";
    };
    StaticDataContainer.getIconSVG = function () {
        return "\n            <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"bug\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-inline--fa fa-bug fa-w-16\"><path fill=\"#f8f8f8\" d=\"M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758 0 45.255-12.498 12.497-32.759 12.496-45.256 0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v244c-34.351 0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256 0-12.496-12.497-12.496-32.758 0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758 0-45.255 12.498-12.497 32.758-12.497 45.256 0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256 0 12.496 12.497 12.496 32.758 0 45.255L424 197.255V256h56c17.972 0 32.484 14.816 31.988 32.9zM257 0c-61.856 0-112 50.144-112 112h224C369 50.144 318.856 0 257 0z\" class=\"\"></path></svg>\n        ";
    };
    StaticDataContainer.getCloseSVG = function () {
        return "\n            <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"times\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" class=\"svg-inline--fa fa-times fa-w-10\"><path fill=\"#f8f8f8\" d=\"M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z\" class=\"\"></path></svg>\n        ";
    };
    return StaticDataContainer;
}());
var DOM = /** @class */ (function () {
    function DOM() {
    }
    DOM.createElement = function (tagName, attributeObject, styleObject, parentElement) {
        var newElement = document.createElement(tagName);
        DOM.setStyle(newElement, styleObject);
        DOM.setAttributes(newElement, attributeObject);
        if (parentElement) {
            parentElement.appendChild(newElement);
        }
        return newElement;
    };
    DOM.removeElement = function (el) {
        if (el && el.remove) {
            el.remove();
            return true;
        }
        else {
            return false;
        }
    };
    DOM.setStyle = function (el, styleObject) {
        for (var _i = 0, _a = Object.keys(styleObject); _i < _a.length; _i++) {
            var styleProp = _a[_i];
            el.style[styleProp] = styleObject[styleProp];
        }
    };
    DOM.setAttributes = function (el, attributeObject) {
        for (var _i = 0, _a = Object.keys(attributeObject); _i < _a.length; _i++) {
            var attrProp = _a[_i];
            el.setAttribute(attrProp, attributeObject[attrProp]);
        }
    };
    DOM.renderIf = function (el, state) {
        if (state) {
            el.style.display = 'flex';
        }
        else {
            el.style.display = 'none';
        }
    };
    return DOM;
}());
var LogTypes;
(function (LogTypes) {
    LogTypes["ERROR"] = "ERR";
    LogTypes["WARN"] = "WAR";
    LogTypes["INFO"] = "INF";
})(LogTypes || (LogTypes = {}));
var MobileLogger = /** @class */ (function () {
    function MobileLogger() {
        this.logs = [];
        this.onInit();
    }
    // Ladder Methods
    MobileLogger.prototype.onInit = function () {
        this.setDefaults();
        this.renderButton();
        this.renderModal();
        this.setEvents();
    };
    MobileLogger.prototype.setDefaults = function () { };
    MobileLogger.prototype.setEvents = function () {
        var _this = this;
        window.addEventListener('error', function (error) {
            var newLog = {
                message: error.message,
                timestamp: new Date().getTime(),
                type: LogTypes.ERROR
            };
            _this.addLog(newLog);
        }, false);
        this.inspectButtonRef.addEventListener('click', function () { return _this.toggleModal(); }, false);
        var that = this;
        // https://stackoverflow.com/questions/19846078/how-to-read-from-chromes-console-in-javascript/19846113
        console['defaultLog'] = console.log.bind(console);
        console.log = function () {
            that.catchConsole(arguments, LogTypes.INFO);
            console['defaultLog'].apply(console, arguments);
        };
        console['defaultWarn'] = console.warn.bind(console);
        console.warn = function () {
            that.catchConsole(arguments, LogTypes.WARN);
            console['defaultWarn'].apply(console, arguments);
        };
        console['defaultError'] = console.error.bind(console);
        console.error = function () {
            that.catchConsole(arguments, LogTypes.ERROR);
            console['defaultWarn'].apply(console, arguments);
        };
    };
    MobileLogger.prototype.renderButton = function () {
        var buttonContainer = DOM.createElement('div', {}, {
            position: 'fixed',
            right: '15px',
            bottom: '15px',
            width: '58px',
            height: '58px',
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            borderRadius: '15px',
            userSelect: 'none',
            zIndex: '1000001'
        }, document.body);
        var buttonWrapper = DOM.createElement('div', {}, {
            width: '58px',
            height: '58px',
            userSelect: 'none'
        }, buttonContainer);
        buttonWrapper.innerHTML = StaticDataContainer.getSquircleSVG();
        var buttonIcon = DOM.createElement('span', {}, {
            position: 'absolute',
            left: '18px',
            top: '18px',
            width: '24px',
            height: '24px',
        }, buttonWrapper);
        buttonIcon.innerHTML = StaticDataContainer.getIconSVG();
        this.inspectButtonRef = buttonContainer;
    };
    MobileLogger.prototype.renderModal = function () {
        // TODO : - Position fixed ios issue
        var modal = DOM.createElement('div', {}, {
            position: 'fixed',
            left: '0',
            top: '0',
            width: '100vw',
            height: '100%',
            display: 'none',
            flexDirection: 'column',
            justifyContent: 'flex-start',
            alignItems: 'flex-start',
            backgroundColor: '#202124',
            overflow: 'auto',
            transform: 'translate3d(0,0,0)',
            zIndex: '1000000'
        }, document.body);
        this.inspectModalRef = modal;
    };
    // Construct Methods
    MobileLogger.prototype.formatLog = function (log) {
        return "[" + new Date(log.timestamp).toLocaleTimeString() + "] [" + log.type + "] - " + log.message;
    };
    MobileLogger.prototype.catchConsole = function (args, type) {
        var newLog = {
            timestamp: new Date().getTime(),
            type: type,
            message: ''
        };
        for (var i = 0; i < args.length; i++) {
            newLog.message += args[i];
            if (i < args.length - 1) {
                newLog.message += ', ';
            }
        }
        this.addLog(newLog);
    };
    MobileLogger.prototype.addLog = function (log) {
        var _this = this;
        this.logs.push(log);
        // TODO : - Improve log saving and rendering
        setTimeout(function () {
            _this.updateModal(log);
        }, 10);
    };
    MobileLogger.prototype.updateModal = function (log) {
        var formattedLog = this.formatLog(log);
        var boxStyle = '';
        var fontColor = '';
        if (log.type === LogTypes.INFO) {
            boxStyle = "border-bottom: 1px solid #3a3a3a";
            fontColor = 'rgb(240 240 240)';
        }
        else if (log.type === LogTypes.WARN) {
            boxStyle = "border-bottom: 1px solid rgb(102 85 0); background-color: #332b00";
            fontColor = 'rgb(255 221 158)';
        }
        else if (log.type === LogTypes.ERROR) {
            boxStyle = "border-bottom: 1px solid rgb(92 0 0); background-color: #290000";
            fontColor = '#ff8080';
        }
        this.inspectModalRef.innerHTML += "<p style=\"box-sizing: border-box; user-select: text; display: inline-block; width: 100%; max-width: 100%; white-space: pre-wrap; min-height: 20px; padding-top: 1px; padding-bottom: 1px; padding-left: 4px; margin: 0; font-family: consolas, sans-serif; font-size: 12px; line-height: 15px; flex-shrink: 0; color: " + fontColor + "; " + boxStyle + ";\">" + formattedLog + "</p>";
        this.inspectModalRef.scroll(0, this.inspectModalRef.scrollHeight);
    };
    MobileLogger.prototype.toggleModal = function () {
        this.modalState = !this.modalState;
        DOM.renderIf(this.inspectModalRef, this.modalState);
        if (this.modalState) {
            this.inspectModalRef.scroll(0, this.inspectModalRef.scrollHeight);
        }
        else {
        }
    };
    return MobileLogger;
}());
var _md = new MobileLogger();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb2JpbGUtbG9nZ2VyLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7SUFBQTtJQXFCQSxDQUFDO0lBcEJVLGtDQUFjLEdBQXJCO1FBQ0ksT0FBTyw4bkJBS04sQ0FBQztJQUNOLENBQUM7SUFFTSw4QkFBVSxHQUFqQjtRQUNJLE9BQU8sMm5DQUVOLENBQUM7SUFDTixDQUFDO0lBRU0sK0JBQVcsR0FBbEI7UUFDSSxPQUFPLDhwQkFFTixDQUFDO0lBQ04sQ0FBQztJQUNMLDBCQUFDO0FBQUQsQ0FBQztBQUVEO0lBQUE7SUEyQ0EsQ0FBQztJQTFDVSxpQkFBYSxHQUFwQixVQUFxQixPQUFvQyxFQUFFLGVBQXVCLEVBQUUsV0FBbUIsRUFBRSxhQUEwQjtRQUMvSCxJQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRW5ELEdBQUcsQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxhQUFhLENBQUMsVUFBVSxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBRS9DLElBQUksYUFBYSxFQUFFO1lBQ2YsYUFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUN6QztRQUVELE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7SUFFTSxpQkFBYSxHQUFwQixVQUFxQixFQUFXO1FBQzVCLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUU7WUFDakIsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ1osT0FBTyxJQUFJLENBQUM7U0FDZjthQUFNO1lBQ0gsT0FBTyxLQUFLLENBQUM7U0FDaEI7SUFDTCxDQUFDO0lBRU0sWUFBUSxHQUFmLFVBQWdCLEVBQWUsRUFBRSxXQUFtQjtRQUNoRCxLQUF3QixVQUF3QixFQUF4QixXQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUF4QixjQUF3QixFQUF4QixJ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a0IsQ0FBQztTQUNsQzthQUFNLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxRQUFRLENBQUMsS0FBSyxFQUFFO1lBQ3BDLFFBQVEsR0FBRyxpRUFBaUUsQ0FBQztZQUM3RSxTQUFTLEdBQUcsU0FBUyxDQUFDO1NBQ3pCO1FBRUQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLElBQUksNFRBQXlULFNBQVMsVUFBSyxRQUFRLFlBQU0sWUFBWSxTQUFNLENBQUM7UUFDMVksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVPLGtDQUFXLEdBQW5CO1FBQ0ksSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDbkMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUVwRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDakIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDckU7YUFBTTtTQUNOO0lBQ0wsQ0FBQztJQUNMLG1CQUFDO0FBQUQsQ0FBQztBQUVELElBQU0sR0FBRyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUMiLCJmaWxlIjoibW9iaWxlLWxvZ2dlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFN0YXRpY0RhdGFDb250YWluZXIge1xyXG4gICAgc3RhdGljIGdldFNxdWlyY2xlU1ZHKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1OFwiIGhlaWdodD1cIjU4XCIgdmlld0JveD1cIi0zMDQgLTMwNCA2MDggNjA4XCI+XHJcbiAgICAgICAgICAgICAgICA8dGl0bGU+U3F1aXJjbGU6IHggdG8gNHRoIHBsdXMgeSB0byA0dGggZXF1YWxzIHJhZGl1cyB0byA0dGg8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgPHBhdGggZmlsbD1cIiMwMWEwZTRcIiBzdHJva2U9XCIjMDFhMGU0XCIgc3Ryb2tlLXdpZHRoPVwiNC4wNFwiIGQ9XCJNMCwyODggQzEyNi4yLDI4OCwxOTYuMzU2MywyODgsMjQyLjE3ODIsMjQyLjE3ODIgQzI4OCwxOTYuMzU2MywyODgsMTI2LjIsMjg4LDAgQzI4OCwtMTI2LjIsMjg4LC0xOTYuMzU2MywyNDIuMTc4MiwtMjQyLjE3ODIgQzE5Ni4zNTYzLC0yODgsMTI2LjIsLTI4OCwwLC0yODggQy0xMjYuMiwtMjg4LC0xOTYuMzU2MywtMjg4LC0yNDIuMTc4MiwtMjQyLjE3ODIgQy0yODgsLTE5Ni4zNTYzLC0yODgsLTEyNi4yLC0yODgsMCBDLTI4OCwxMjYuMiwtMjg4LDE5Ni4zNTYzLC0yNDIuMTc4MiwyNDIuMTc4MiBDLTE5Ni4zNTYzLDI4OCwtMTI2LjIsMjg4LDAsMjg4WlwiLz5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0SWNvblNWRygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgICAgIDxzdmcgYXJpYS1oaWRkZW49XCJ0cnVlXCIgZm9jdXNhYmxlPVwiZmFsc2VcIiBkYXRhLXByZWZpeD1cImZhc1wiIGRhdGEtaWNvbj1cImJ1Z1wiIHJvbGU9XCJpbWdcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCA1MTIgNTEyXCIgY2xhc3M9XCJzdmctaW5saW5lLS1mYSBmYS1idWcgZmEtdy0xNlwiPjxwYXRoIGZpbGw9XCIjZjhmOGY4XCIgZD1cIk01MTEuOTg4IDI4OC45Yy0uNDc4IDE3LjQzLTE1LjIxNyAzMS4xLTMyLjY1MyAzMS4xSDQyNHYxNmMwIDIxLjg2NC00Ljg4MiA0Mi41ODQtMTMuNiA2MS4xNDVsNjAuMjI4IDYwLjIyOGMxMi40OTYgMTIuNDk3IDEyLjQ5NiAzMi43NTggMCA0NS4yNTUtMTIuNDk4IDEyLjQ5Ny0zMi43NTkgMTIuNDk2LTQ1LjI1NiAwbC01NC43MzYtNTQuNzM2QzM0NS44ODYgNDY3Ljk2NSAzMTQuMzUxIDQ4MCAyODAgNDgwVjIzNmMwLTYuNjI3LTUuMzczLTEyLTEyLTEyaC0yNGMtNi42MjcgMC0xMiA1LjM3My0xMiAxMnYyNDRjLTM0LjM1MSAwLTY1Ljg4Ni0xMi4wMzUtOTAuNjM2LTMyLjEwOGwtNTQuNzM2IDU0LjczNmMtMTIuNDk4IDEyLjQ5Ny0zMi43NTkgMTIuNDk2LTQ1LjI1NiAwLTEyLjQ5Ni0xMi40OTctMTIuNDk2LTMyLjc1OCAwLTQ1LjI1NWw2MC4yMjgtNjAuMjI4QzkyLjg4MiAzNzguNTg0IDg4IDM1Ny44NjQgODggMzM2di0xNkgzMi42NjZDMTUuMjMgMzIwIC40OTEgMzA2LjMzLjAxMyAyODguOS0uNDg0IDI3MC44MTYgMTQuMDI4IDI1NiAzMiAyNTZoNTZ2LTU4Ljc0NWwtNDYuNjI4LTQ2LjYyOGMtMTIuNDk2LTEyLjQ5Ny0xMi40OTYtMzIuNzU4IDAtNDUuMjU1IDEyLjQ5OC0xMi40OTcgMzIuNzU4LTEyLjQ5NyA0NS4yNTYgMEwxNDEuMjU1IDE2MGgyMjkuNDg5bDU0LjYyNy01NC42MjdjMTIuNDk4LTEyLjQ5NyAzMi43NTgtMTIuNDk3IDQ1LjI1NiAwIDEyLjQ5NiAxMi40OTcgMTIuNDk2IDMyLjc1OCAwIDQ1LjI1NUw0MjQgMTk3LjI1NVYyNTZoNTZjMTcuOTcyIDAgMzIuNDg0IDE0LjgxNiAzMS45ODggMzIuOXpNMjU3IDBjLTYxLjg1NiAwLTExMiA1MC4xNDQtMTEyIDExMmgyMjRDMzY5IDUwLjE0NCAzMTguODU2IDAgMjU3IDB6XCIgY2xhc3M9XCJcIj48L3BhdGg+PC9zdmc+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0Q2xvc2VTVkcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8c3ZnIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGZvY3VzYWJsZT1cImZhbHNlXCIgZGF0YS1wcmVmaXg9XCJmYXJcIiBkYXRhLWljb249XCJ0aW1lc1wiIHJvbGU9XCJpbWdcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAzMjAgNTEyXCIgY2xhc3M9XCJzdmctaW5saW5lLS1mYSBmYS10aW1lcyBmYS13LTEwXCI+PHBhdGggZmlsbD1cIiNmOGY4ZjhcIiBkPVwiTTIwNy42IDI1NmwxMDcuNzItMTA3LjcyYzYuMjMtNi4yMyA2LjIzLTE2LjM0IDAtMjIuNThsLTI1LjAzLTI1LjAzYy02LjIzLTYuMjMtMTYuMzQtNi4yMy0yMi41OCAwTDE2MCAyMDguNCA1Mi4yOCAxMDAuNjhjLTYuMjMtNi4yMy0xNi4zNC02LjIzLTIyLjU4IDBMNC42OCAxMjUuN2MtNi4yMyA2LjIzLTYuMjMgMTYuMzQgMCAyMi41OEwxMTIuNCAyNTYgNC42OCAzNjMuNzJjLTYuMjMgNi4yMy02LjIzIDE2LjM0IDAgMjIuNThsMjUuMDMgMjUuMDNjNi4yMyA2LjIzIDE2LjM0IDYuMjMgMjIuNTggMEwxNjAgMzAzLjZsMTA3LjcyIDEwNy43MmM2LjIzIDYuMjMgMTYuMzQgNi4yMyAyMi41OCAwbDI1LjAzLTI1LjAzYzYuMjMtNi4yMyA2LjIzLTE2LjM0IDAtMjIuNThMMjA3LjYgMjU2elwiIGNsYXNzPVwiXCI+PC9wYXRoPjwvc3ZnPlxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERPTSB7XHJcbiAgICBzdGF0aWMgY3JlYXRlRWxlbWVudCh0YWdOYW1lOiBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXAsIGF0dHJpYnV0ZU9iamVjdDogb2JqZWN0LCBzdHlsZU9iamVjdDogb2JqZWN0LCBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxuXHJcbiAgICAgICAgRE9NLnNldFN0eWxlKG5ld0VsZW1lbnQsIHN0eWxlT2JqZWN0KTtcclxuICAgICAgICBET00uc2V0QXR0cmlidXRlcyhuZXdFbGVtZW50LCBhdHRyaWJ1dGVPYmplY3QpO1xyXG5cclxuICAgICAgICBpZiAocGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKG5ld0VsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ld0VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZUVsZW1lbnQoZWw6IEVsZW1lbnQpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoZWwgJiYgZWwucmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXRTdHlsZShlbDogSFRNTEVsZW1lbnQsIHN0eWxlT2JqZWN0OiBvYmplY3QpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHN0eWxlUHJvcCBvZiBPYmplY3Qua2V5cyhzdHlsZU9iamVjdCkpIHtcclxuICAgICAgICAgICAgZWwuc3R5bGVbc3R5bGVQcm9wXSA9IHN0eWxlT2JqZWN0W3N0eWxlUHJvcF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXRBdHRyaWJ1dGVzKGVsOiBIVE1MRWxlbWVudCwgYXR0cmlidXRlT2JqZWN0OiBvYmplY3QpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGF0dHJQcm9wIG9mIE9iamVjdC5rZXlzKGF0dHJpYnV0ZU9iamVjdCkpIHtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHJQcm9wLCBhdHRyaWJ1dGVPYmplY3RbYXR0clByb3BdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW5kZXJJZihlbDogSFRNTEVsZW1lbnQsIHN0YXRlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmVudW0gTG9nVHlwZXMge1xyXG4gICAgRVJST1IgPSAnRVJSJyxcclxuICAgIFdBUk4gPSAnV0FSJyxcclxuICAgIElORk8gPSAnSU5GJ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSUxvZyB7XHJcbiAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICAgIHR5cGU6IExvZ1R5cGVzO1xyXG59XHJcblxyXG5jbGFzcyBNb2JpbGVMb2dnZXIge1xyXG4gICAgcHJpdmF0ZSBpbnNwZWN0QnV0dG9uUmVmOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgaW5zcGVjdE1vZGFsUmVmOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgbG9nczogSUxvZ1tdID0gW107XHJcbiAgICBwcml2YXRlIG1vZGFsU3RhdGU6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5vbkluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMYWRkZXIgTWV0aG9kc1xyXG5cclxuICAgIHByaXZhdGUgb25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0RGVmYXVsdHMoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyTW9kYWwoKTtcclxuICAgICAgICB0aGlzLnNldEV2ZW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0RGVmYXVsdHMoKTogdm9pZCB7fVxyXG5cclxuICAgIHByaXZhdGUgc2V0RXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdMb2c6IElMb2cgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IExvZ1R5cGVzLkVSUk9SXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZExvZyhuZXdMb2cpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmluc3BlY3RCdXR0b25SZWYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZU1vZGFsKCksIGZhbHNlKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5ODQ2MDc4L2hvdy10by1yZWFkLWZyb20tY2hyb21lcy1jb25zb2xlLWluLWphdmFzY3JpcHQvMTk4NDYxMTNcclxuICAgICAgICBjb25zb2xlWydkZWZhdWx0TG9nJ10gPSBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoYXQuY2F0Y2hDb25zb2xlKGFyZ3VtZW50cywgTG9nVHlwZXMuSU5GTyk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlWydkZWZhdWx0TG9nJ10uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zb2xlWydkZWZhdWx0V2FybiddID0gY29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7XHJcbiAgICAgICAgY29uc29sZS53YXJuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoYXQuY2F0Y2hDb25zb2xlKGFyZ3VtZW50cywgTG9nVHlwZXMuV0FSTik7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlWydkZWZhdWx0V2FybiddLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc29sZVsnZGVmYXVsdEVycm9yJ10gPSBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGF0LmNhdGNoQ29uc29sZShhcmd1bWVudHMsIExvZ1R5cGVzLkVSUk9SKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGVbJ2RlZmF1bHRXYXJuJ10uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IERPTS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7fSwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgcmlnaHQ6ICcxNXB4JyxcclxuICAgICAgICAgICAgYm90dG9tOiAnMTVweCcsXHJcbiAgICAgICAgICAgIHdpZHRoOiAnNThweCcsXHJcbiAgICAgICAgICAgIGhlaWdodDogJzU4cHgnLFxyXG4gICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcclxuICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzE1cHgnLFxyXG4gICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXHJcbiAgICAgICAgICAgIHpJbmRleDogJzEwMDAwMDEnXHJcbiAgICAgICAgfSwgZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uV3JhcHBlciA9IERPTS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7fSwge1xyXG4gICAgICAgICAgICB3aWR0aDogJzU4cHgnLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICc1OHB4JyxcclxuXHJcbiAgICAgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJ1xyXG4gICAgICAgIH0sIGJ1dHRvbkNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGJ1dHRvbldyYXBwZXIuaW5uZXJIVE1MID0gU3RhdGljRGF0YUNvbnRhaW5lci5nZXRTcXVpcmNsZVNWRygpO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25JY29uID0gRE9NLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7fSwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgbGVmdDogJzE4cHgnLFxyXG4gICAgICAgICAgICB0b3A6ICcxOHB4JyxcclxuICAgICAgICAgICAgd2lkdGg6ICcyNHB4JyxcclxuICAgICAgICAgICAgaGVpZ2h0OiAnMjRweCcsXHJcbiAgICAgICAgfSwgYnV0dG9uV3JhcHBlcik7XHJcblxyXG4gICAgICAgIGJ1dHRvbkljb24uaW5uZXJIVE1MID0gU3RhdGljRGF0YUNvbnRhaW5lci5nZXRJY29uU1ZHKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5zcGVjdEJ1dHRvblJlZiA9IGJ1dHRvbkNvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlck1vZGFsKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFRPRE8gOiAtIFBvc2l0aW9uIGZpeGVkIGlvcyBpc3N1ZVxyXG5cclxuICAgICAgICBjb25zdCBtb2RhbCA9IERPTS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7fSwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgbGVmdDogJzAnLFxyXG4gICAgICAgICAgICB0b3A6ICcwJyxcclxuICAgICAgICAgICAgd2lkdGg6ICcxMDB2dycsXHJcbiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxyXG4gICAgICAgICAgICBkaXNwbGF5OiAnbm9uZScsXHJcbiAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxyXG4gICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtc3RhcnQnLFxyXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMyMDIxMjQnLFxyXG4gICAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLDAsMCknLFxyXG4gICAgICAgICAgICB6SW5kZXg6ICcxMDAwMDAwJ1xyXG4gICAgICAgIH0sIGRvY3VtZW50LmJvZHkpO1xyXG5cclxuICAgICAgICB0aGlzLmluc3BlY3RNb2RhbFJlZiA9IG1vZGFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnN0cnVjdCBNZXRob2RzXHJcblxyXG4gICAgcHJpdmF0ZSBmb3JtYXRMb2cobG9nOiBJTG9nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYFske25ldyBEYXRlKGxvZy50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpfV0gWyR7bG9nLnR5cGV9XSAtICR7bG9nLm1lc3NhZ2V9YDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhdGNoQ29uc29sZShhcmdzOiBJQXJndW1lbnRzLCB0eXBlOiBMb2dUeXBlcyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG5ld0xvZzogSUxvZyA9IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogJydcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbmV3TG9nLm1lc3NhZ2UgKz0gYXJnc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpIDwgYXJncy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdMb2cubWVzc2FnZSArPSAnLCAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFkZExvZyhuZXdMb2cpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkTG9nKGxvZzogSUxvZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubG9ncy5wdXNoKGxvZyk7XHJcblxyXG4gICAgICAgIC8vIFRPRE8gOiAtIEltcHJvdmUgbG9nIHNhdmluZyBhbmQgcmVuZGVyaW5nXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kYWwobG9nKTtcclxuICAgICAgICB9LCAxMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVNb2RhbChsb2c6IElMb2cpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRMb2cgPSB0aGlzLmZvcm1hdExvZyhsb2cpO1xyXG4gICAgICAgIGxldCBib3hTdHlsZSA9ICcnO1xyXG4gICAgICAgIGxldCBmb250Q29sb3IgPSAnJztcclxuXHJcbiAgICAgICAgaWYgKGxvZy50eXBlID09PSBMb2dUeXBlcy5JTkZPKSB7XHJcbiAgICAgICAgICAgIGJveFN0eWxlID0gYGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjM2EzYTNhYDtcclxuICAgICAgICAgICAgZm9udENvbG9yID0gJ3JnYigyNDAgMjQwIDI0MCknO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobG9nLnR5cGUgPT09IExvZ1R5cGVzLldBUk4pIHtcclxuICAgICAgICAgICAgYm94U3R5bGUgPSBgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYigxMDIgODUgMCk7IGJhY2tncm91bmQtY29sb3I6ICMzMzJiMDBgO1xyXG4gICAgICAgICAgICBmb250Q29sb3IgPSAncmdiKDI1NSAyMjEgMTU4KSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChsb2cudHlwZSA9PT0gTG9nVHlwZXMuRVJST1IpIHtcclxuICAgICAgICAgICAgYm94U3R5bGUgPSBgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYig5MiAwIDApOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjkwMDAwYDtcclxuICAgICAgICAgICAgZm9udENvbG9yID0gJyNmZjgwODAnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbnNwZWN0TW9kYWxSZWYuaW5uZXJIVE1MICs9IGA8cCBzdHlsZT1cImJveC1zaXppbmc6IGJvcmRlci1ib3g7IHVzZXItc2VsZWN0OiB0ZXh0OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAxMDAlOyBtYXgtd2lkdGg6IDEwMCU7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgbWluLWhlaWdodDogMjBweDsgcGFkZGluZy10b3A6IDFweDsgcGFkZGluZy1ib3R0b206IDFweDsgcGFkZGluZy1sZWZ0OiA0cHg7IG1hcmdpbjogMDsgZm9udC1mYW1pbHk6IGNvbnNvbGFzLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDEycHg7IGxpbmUtaGVpZ2h0OiAxNXB4OyBmbGV4LXNocmluazogMDsgY29sb3I6ICR7Zm9udENvbG9yfTsgJHtib3hTdHlsZX07XCI+JHtmb3JtYXR0ZWRMb2d9PC9wPmA7XHJcbiAgICAgICAgdGhpcy5pbnNwZWN0TW9kYWxSZWYuc2Nyb2xsKDAsIHRoaXMuaW5zcGVjdE1vZGFsUmVmLnNjcm9sbEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVNb2RhbCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1vZGFsU3RhdGUgPSAhdGhpcy5tb2RhbFN0YXRlO1xyXG4gICAgICAgIERPTS5yZW5kZXJJZih0aGlzLmluc3BlY3RNb2RhbFJlZiwgdGhpcy5tb2RhbFN0YXRlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kYWxTdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc3BlY3RNb2RhbFJlZi5zY3JvbGwoMCwgdGhpcy5pbnNwZWN0TW9kYWxSZWYuc2Nyb2xsSGVpZ2h0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgX21kID0gbmV3IE1vYmlsZUxvZ2dlcigpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9